<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Bug Details | Bug Tracker</title>
    <link rel="stylesheet" th:href="@{/css/bug-style.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</head>
<body>

    <div th:replace="fragments/sidebar :: sidebar"></div>

    <div class="main-content">
        <h1>Bug Details</h1>
        <p><b>ID:</b> <span th:text="${bug.id}"></span></p>
        <p><b>Title:</b> <span th:text="${bug.title}"></span></p>
        <p><b>Description:</b> <span th:text="${bug.description}"></span></p>
        <p><b>Status:</b> <span th:text="${bug.status}"></span></p>
        <p><b>Priority:</b> <span th:text="${bug.priority}"></span></p>
        <p><b>Assigned To:</b>
            <span th:text="${bug.assignedToUsername != null ? bug.assignedToUsername : 'Unassigned'}"></span>
        </p>

        <a th:href="@{/bugs}" class="btn btn-secondary">Back</a>

        <span sec:authorize="hasRole('ADMIN')">
            <a th:href="@{/bugs/edit/{id}(id=${bug.id})}" class="btn btn-warning">Edit</a>
            <a th:href="@{/bugs/delete/{id}(id=${bug.id})}"
               class="btn btn-danger"
               onclick="return confirm('Delete this bug?')">Delete</a>
        </span>

        <span sec:authorize="hasRole('DEVELOPER')">
            <a th:if="${bug.assignedToUsername == username}"
               th:href="@{/bugs/edit/{id}(id=${bug.id})}"
               class="btn btn-warning">Edit</a>
        </span>
    </div>
</body>
</html>
